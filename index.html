                                                               <!-- 
・ARButton
ARButtonを使用すると、デバイスがWebXRをサポートしているかどうかを確認し、サポートされている場合はARセッションを開始するためのボタンを簡単に作成することができます。
サポートしていない場合は、ボタンにAR NOT AUPPORTED と表示される

・hittest

 -->


<!-- 
参考

https://qiita.com/tenugui_taro/items/18901af261a23b0670be
https://chat.openai.com/c/4086099e-a2d7-44a7-9215-47eedcc1615e

 -->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js AR Example</title>
    <style>
      body { margin: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <!-- ライブラリ -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script> -->
    <!-- <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/jsm/webxr/ARButton.js"></script> -->
    
    <script type="module">
      // Three.module.js用ライブラリ
      import * as THREE from 'https://cdn.skypack.dev/three@0.135.0/build/three.module.js';
      // ARButton用ライブラリ
      import { ARButton } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/webxr/ARButton.js';


      // WebGLRendererを作成し、カメラを設定します。
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);


      document.body.appendChild(ARButton.createButton(renderer, { requiredFeatures: ["hit-test"] }));          


      // // ARButtonを作成し、ARセッションを開始します。
      // ARButton.createButton(renderer, { requiredFeatures: ['hit-test'] }).then((button) => {
      //   document.body.appendChild(button);
      //   button.addEventListener('click', function () {
      //     // ARセッションを開始するコード
      //     // ...
      //   });
      // });


      // ARセッションが開始された後、平面検知を有効化します。
      function startARSession() {
        // ARセッションを開始するコード
        // ...
        
        // 平面検知を有効化する
        const session = renderer.xr.getSession();
        session.addEventListener('select', onSelect);
        session.addEventListener('selectstart', onSelectStart);
        session.addEventListener('selectend', onSelectEnd);
      }

      function onSelect(event) {
        // 平面上にオブジェクトを配置するコード
        // ...
      }

      function onSelectStart(event) {
        // オブジェクト配置のための準備処理を行うコード
        // ...
      }

      function onSelectEnd(event) {
        // オブジェクト配置のための後処理を行うコード
        // ...
      }




 
    </script>
  </body>
</html>
   
 

 



